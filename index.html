<!doctype html>
<html lang="es">
<head>
  <!-- =========================
       SEO + Social + PWA-ish
  ========================== -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#050617" />
  <meta name="robots" content="index,follow,max-image-preview:large" />

  <title id="metaTitle">LoVasASudar.com ¬∑ Calculadora de castigo cal√≥rico</title>
  <meta id="metaDesc" name="description" content="Calcula el castigo cal√≥rico de tu cena/noche de copas y descubre cu√°nto ejercicio tendr√≠as que hacer para sudarlo." />

  <!-- Canonical + alternates (misma p√°gina con ?lang=) -->
  <link id="linkCanonical" rel="canonical" href="https://lovasasudar.com/" />
  <link rel="alternate" hreflang="es" href="https://lovasasudar.com/?lang=es" />
  <link rel="alternate" hreflang="en" href="https://lovasasudar.com/?lang=en" />
  <link rel="alternate" hreflang="x-default" href="https://lovasasudar.com/" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="LoVasASudar.com" />
  <meta property="og:title" content="LoVasASudar.com ¬∑ Calculadora de castigo cal√≥rico" />
  <meta property="og:description" content="Traduce calor√≠as a esfuerzo real: cu√°nto ejercicio para sudarlo. Y te genera un meme compartible." />
  <meta property="og:url" content="https://lovasasudar.com/" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="LoVasASudar.com" />
  <meta name="twitter:description" content="Calcula el castigo cal√≥rico y genera un meme compartible." />

  <!-- Favicon (SVG inline) -->
  <link rel="icon" type="image/svg+xml"
        href='data:image/svg+xml;utf8,
<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <defs>
    <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0" stop-color="%235b7cfa"/>
      <stop offset="1" stop-color="%23ff4fd8"/>
    </linearGradient>
    <filter id="s" x="-30%" y="-30%" width="160%" height="160%">
      <feGaussianBlur stdDeviation="2" result="b"/>
      <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
  </defs>
  <rect x="6" y="6" width="52" height="52" rx="16" fill="%23050617" stroke="url(%23g)" stroke-width="3"/>
  <path d="M20 38c0-8 6-14 14-14s14 6 14 14" fill="none" stroke="url(%23g)" stroke-width="5" stroke-linecap="round" filter="url(%23s)"/>
  <circle cx="24" cy="40" r="3" fill="%2338e8ff"/>
  <circle cx="40" cy="20" r="3" fill="%23ffb648"/>
  <text x="32" y="48" text-anchor="middle" font-family="system-ui,Segoe UI,Arial" font-size="12" font-weight="900" fill="%23ffffff">SUDAR</text>
</svg>' />

  <!-- Structured data -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"LoVasASudar.com",
    "url":"https://lovasasudar.com/",
    "applicationCategory":"HealthApplication",
    "operatingSystem":"All",
    "description":"Calculadora divertida para estimar el ejercicio necesario para compensar calor√≠as (MET) y generar un meme compartible.",
    "inLanguage":["es","en"]
  }
  </script>

  <!-- =========================
       GA4 (gtag)
  ========================== -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-RLQ6Y55SNC"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-RLQ6Y55SNC', {
      anonymize_ip: true,
      allow_ad_personalization_signals: false
    });
  </script>

  <!-- CSS separado (misma est√©tica) -->
  <link rel="stylesheet" href="./assets/css/styles.css" />

  <!-- Parche m√≠nimo (temporal) para CTA sticky + overlay meme.
       Si prefieres, lo movemos luego a assets/css/styles.css -->
  <style>
    /* Sticky CTA en m√≥vil: visible sin scroll */
    #stickyCalcBar {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 9999;
      padding: 10px 12px calc(10px + env(safe-area-inset-bottom));
      background: rgba(5, 6, 23, 0.88);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255,255,255,0.08);
      display: none;
    }
    #stickyCalcBar .cta {
      width: 100%;
      margin: 0;
    }
    @media (max-width: 768px) {
      #stickyCalcBar { display: block; }
      /* Para que el contenido no quede tapado por la barra */
      body { padding-bottom: 86px; }
    }

    /* CTA arriba: sin inventar clases nuevas, reusamos .cta */
    #btnCalcTop { width: 100%; margin-top: 12px; }

    /* Overlay meme (dominante) */
    #memeOverlay[hidden] { display: none !important; }
    #memeOverlay {
      position: fixed;
      inset: 0;
      z-index: 10000;
      background: rgba(0,0,0,0.72);
      backdrop-filter: blur(8px);
      display: grid;
      place-items: center;
      padding: 18px;
    }
    #memeOverlay .panel {
      width: min(980px, 96vw);
      background: rgba(5, 6, 23, 0.96);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 18px;
      padding: 14px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.55);
      max-height: 92vh;
      overflow: auto;
    }
    #memeOverlay .topRow {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }
    #memeOverlay .topRow .title {
      font-weight: 950;
      letter-spacing: 0.2px;
    }
    #memeOverlay .closeBtn {
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.06);
      color: #fff;
      border-radius: 12px;
      padding: 8px 10px;
      cursor: pointer;
    }
    #memeOverlay .imgWrap {
      border-radius: 14px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
    }
    #memeOverlay img {
      display: block;
      width: 100%;
      height: auto;
    }
    #memeOverlay .actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 12px;
    }
    #memeOverlay .actions .btnLite {
      flex: 1 1 180px;
      text-align: center;
    }
  </style>
</head>

<body>
  <div class="fx" aria-hidden="true"></div>

  <!-- NE√ìN IZQUIERDO -->
  <div class="neon-sign" aria-hidden="true" title="Lo vas a sudar">
    <div>
      <div class="neon-text">LO VAS A SUDAR</div>
      <div class="neon-sub">CALOR√çAS</div>
    </div>
  </div>

  <!-- NE√ìN DERECHO (JAPON√âS) -->
  <div class="neon-sign-right" aria-hidden="true" title="„Éè„É≥„Éê„Éº„Ç¨„Éº„Å®ÂØøÂè∏">
    <div class="jp-text">„Éè„É≥„Éê„Éº„Ç¨„Éº„Å®ÂØøÂè∏</div>
  </div>

  <div class="wrap">
    <header>
      <div class="brand-pill" id="brand">LoVasASudar.com ¬∑ Calculadora de castigo cal√≥rico</div>

      <div class="langBtns" style="display:flex; gap:10px;">
        <button id="btnES" type="button" class="active" aria-label="Cambiar a espa√±ol">ES</button>
        <button id="btnEN" type="button" aria-label="Switch to English">EN</button>
      </div>
    </header>

    <main class="card">
      <h1 id="title">LoVasASudar.com</h1>
      <p class="subtitle" id="subtitle">
        Mete lo que vas a comer y beber y descubre cu√°nto ejercicio tendr√≠as que hacer para sudarlo. Perfecta para cenas con amigos y noches de copas.
      </p>

      <section class="grid" aria-label="Formulario de c√°lculo">
        <div class="field">
          <label for="food" id="lblFood">Alimento o bebida</label>
          <select id="food" aria-label="Alimento o bebida"></select>

          <!-- CTA arriba (A2): visible sin scroll -->
          <button class="cta" id="btnCalcTop" type="button" data-calc="1">
            CALCULAR (SIN SCROLL) üí•
          </button>

          <div class="row2">
            <div class="field">
              <label for="units" id="lblUnits">N¬∫ de unidades</label>
              <input id="units" type="number" min="1" step="1" value="1" inputmode="numeric" />
              <div class="hint" id="hintUnits">Ej: 3 cervezas ‚Üí pon 3 unidades.</div>
            </div>

            <div class="field">
              <label for="extra" id="lblExtra">Calor√≠as extra</label>
              <input id="extra" type="number" min="0" step="10" value="0" inputmode="numeric" />
              <div class="hint" id="hintExtra">Se suman a lo anterior (comida + copas).</div>
            </div>
          </div>
        </div>

        <div class="field">
          <label for="weight" id="lblWeight">Peso (kg)</label>
          <input id="weight" type="number" min="35" max="200" step="1" value="80" inputmode="numeric" />
          <div class="hint" id="hintWeight">
            El c√°lculo se hace por kg de peso (ecuaci√≥n basada en MET).
          </div>
        </div>

        <div class="field">
          <label for="gender" id="lblGender">G√©nero (opcional)</label>
          <select id="gender">
            <option value="na">Prefiero no decirlo</option>
            <option value="male">Hombre</option>
            <option value="female">Mujer</option>
          </select>
          <div class="hint" id="hintGender">
            Ajuste aproximado (~5%). No es magia, es estad√≠stica con resaca.
          </div>
        </div>
      </section>

      <!-- MODOS EXCLUYENTES -->
      <div class="modes" aria-label="Modos">
        <label class="mode" id="mNormal">
          <input type="radio" name="mode" value="normal" checked />
          <span id="tNormal">Modo normal</span>
        </label>

        <label class="mode" id="mDrinks">
          <input type="radio" name="mode" value="drinks" />
          <span id="tDrinks">Modo noche de copas</span>
        </label>

        <label class="mode" id="mBattle">
          <input type="radio" name="mode" value="battle" />
          <span id="tBattle">Batalla de colegas</span>
        </label>

        <label class="mode" id="mInverse">
          <input type="radio" name="mode" value="inverse" />
          <span id="tInverse">Calculadora inversa</span>
        </label>
      </div>

      <!-- PANEL: NOCHE DE COPAS -->
      <div class="panel" id="panelDrinks">
        <h3 id="drinksTitle">üçª A√±ade tus bebidas (se suman al total)</h3>

        <div class="row2">
          <div class="field">
            <label for="drink1" id="lblDrink1">Bebida</label>
            <select id="drink1"></select>
          </div>
          <div class="field">
            <label for="drink1n" id="lblDrink1n">Cantidad</label>
            <input id="drink1n" type="number" min="0" step="1" value="0" inputmode="numeric" />
          </div>
        </div>

        <div class="row2">
          <div class="field">
            <label for="drink2" id="lblDrink2">Bebida (opcional)</label>
            <select id="drink2"></select>
          </div>
          <div class="field">
            <label for="drink2n" id="lblDrink2n">Cantidad</label>
            <input id="drink2n" type="number" min="0" step="1" value="0" inputmode="numeric" />
          </div>
        </div>

        <div class="row2">
          <div class="field">
            <label for="drink3" id="lblDrink3">Bebida (opcional)</label>
            <select id="drink3"></select>
          </div>
          <div class="field">
            <label for="drink3n" id="lblDrink3n">Cantidad</label>
            <input id="drink3n" type="number" min="0" step="1" value="0" inputmode="numeric" />
          </div>
        </div>

        <div class="hint" id="drinksHint">
          Tip: si mezclas ‚Äúcubo cerveza‚Äù + ‚Äúgin-tonic‚Äù, el universo no juzga‚Ä¶ pero las matem√°ticas s√≠.
        </div>
      </div>

      <!-- PANEL: BATALLA -->
      <div class="panel" id="panelBattle">
        <h3 id="battleTitle">‚öîÔ∏è Batalla de colegas (t√∫ + 3)</h3>
        <div class="friends">
          <div class="friendCard">
            <h4 id="youTitle">T√∫</h4>
            <div class="friendRow">
              <input id="p1name" type="text" placeholder="Nombre (opcional)" />
              <select id="p1gender">
                <option value="na">Prefiero no decirlo</option>
                <option value="male">Hombre</option>
                <option value="female">Mujer</option>
              </select>
            </div>
            <div style="margin-top:10px;">
              <input id="p1w" type="number" min="35" max="200" step="1" value="80" inputmode="numeric" />
              <div class="hint" id="battleHint1">Peso (kg)</div>
            </div>
          </div>

          <div class="friendCard">
            <h4 id="f1Title">Colega 1</h4>
            <div class="friendRow">
              <input id="p2name" type="text" placeholder="Nombre" />
              <select id="p2gender">
                <option value="na">Prefiero no decirlo</option>
                <option value="male">Hombre</option>
                <option value="female">Mujer</option>
              </select>
            </div>
            <div style="margin-top:10px;">
              <input id="p2w" type="number" min="35" max="200" step="1" value="75" inputmode="numeric" />
              <div class="hint" id="f1Hint">Peso (kg)</div>
            </div>
          </div>

          <div class="friendCard">
            <h4 id="f2Title">Colega 2</h4>
            <div class="friendRow">
              <input id="p3name" type="text" placeholder="Nombre" />
              <select id="p3gender">
                <option value="na">Prefiero no decirlo</option>
                <option value="male">Hombre</option>
                <option value="female">Mujer</option>
              </select>
            </div>
            <div style="margin-top:10px;">
              <input id="p3w" type="number" min="35" max="200" step="1" value="68" inputmode="numeric" />
              <div class="hint" id="f2Hint">Peso (kg)</div>
            </div>
          </div>

          <div class="friendCard">
            <h4 id="f3Title">Colega 3</h4>
            <div class="friendRow">
              <input id="p4name" type="text" placeholder="Nombre" />
              <select id="p4gender">
                <option value="na">Prefiero no decirlo</option>
                <option value="male">Hombre</option>
                <option value="female">Mujer</option>
              </select>
            </div>
            <div style="margin-top:10px;">
              <input id="p4w" type="number" min="35" max="200" step="1" value="90" inputmode="numeric" />
              <div class="hint" id="f3Hint">Peso (kg)</div>
            </div>
          </div>
        </div>

        <div class="hint" id="battleHint2" style="margin-top:10px;">
          Aqu√≠ no gana el m√°s fuerte. Gana el que tiene menos calor√≠as‚Ä¶ o m√°s dignidad.
        </div>
      </div>

      <!-- PANEL: INVERSA -->
      <div class="panel" id="panelInverse">
        <h3 id="inverseTitle">üîÅ Calculadora inversa</h3>
        <div class="row2">
          <div class="field">
            <label for="invSport" id="lblInvSport">Deporte</label>
            <select id="invSport"></select>
          </div>
          <div class="field">
            <label for="invHours" id="lblInvHours">Duraci√≥n (horas)</label>
            <input id="invHours" type="number" min="0" step="0.25" value="1" inputmode="decimal" />
            <div class="hint" id="invHint">Ej: 1.5 = 1 hora y 30 min</div>
          </div>
        </div>
      </div>

      <!-- CTA original (se mantiene) -->
      <button class="cta" id="btnCalc" type="button" data-calc="1">CALCULAR EJERCICIO NECESARIO üí™</button>

      <section class="results" id="results" aria-label="Resultados">
        <h2 id="resTitle">üéØ Resultados</h2>

        <div class="kpi" id="kpiBlock">
          <div class="box">
            <p class="big" id="kcalOut">0 kcal</p>
            <p class="small" id="kcalSub">Calor√≠as totales estimadas</p>
          </div>
          <div class="box">
            <p class="big" id="modeOut">Normal</p>
            <p class="small" id="modeSub">Modo activo</p>
          </div>
          <div class="box">
            <p class="big" id="mainOut">‚Äî</p>
            <p class="small" id="mainSub">Resumen</p>
          </div>
        </div>

        <div class="divider"></div>

        <div id="sportsTitle" style="font-weight:950; margin-bottom:8px;">‚è±Ô∏è Tiempo para quemarlo (aprox.)</div>
        <div class="sports" id="sportsList"></div>

        <div id="battleResultsWrap" style="display:none;">
          <div class="divider"></div>
          <div style="font-weight:950; margin-bottom:8px;" id="battleResultsTitle">‚öîÔ∏è Resultado por persona</div>
          <div class="sports" id="battleList"></div>
        </div>

        <div id="inverseResultsWrap" style="display:none;">
          <div class="divider"></div>
          <div style="font-weight:950; margin-bottom:8px;" id="inverseResultsTitle">üîÅ Has ‚Äúganado‚Äù esto</div>
          <div class="sports" id="inverseList"></div>
        </div>

        <div class="btnRow" aria-label="Acciones meme">
          <button class="btnLite" id="btnShareTop" type="button" style="display:none;">üì≤ Compartir MEME</button>
          <a class="btnLite" id="btnDownloadTop" download="lovasasudar-meme.png" href="#" style="display:none;">‚¨áÔ∏è Descargar MEME</a>
          <button class="btnLite" id="btnMeme" type="button">üì∏ Generar MEME</button>
        </div>

        <div class="memeWrap" id="memeWrap">
          <canvas id="memeCanvas" width="1200" height="630"></canvas>
        </div>

        <div class="btnRow" aria-label="Acciones meme (abajo)">
          <button class="btnLite" id="btnShare" type="button" style="display:none;">üì≤ Compartir</button>
          <a class="btnLite" id="btnDownload" download="lovasasudar-meme.png" href="#" style="display:none;">‚¨áÔ∏è Descargar MEME</a>
        </div>

        <div class="fineprint" id="fineprint">
          Estimaciones aproximadas basadas en MET (la f√≠sica no negocia, pero s√≠ te deja elegir dardos).
        </div>
      </section>
    </main>
  </div>

  <!-- Sticky CTA m√≥vil (A2) -->
  <div id="stickyCalcBar" aria-label="Acci√≥n r√°pida calcular">
    <button class="cta" id="btnCalcSticky" type="button" data-calc="1">
      CALCULAR AHORA üí™
    </button>
  </div>

  <!-- Overlay meme dominante (A3) -->
  <div id="memeOverlay" role="dialog" aria-modal="true" aria-label="Meme generado" hidden>
    <div class="panel">
      <div class="topRow">
        <div class="title">üì∏ Tu MEME (listo para humillarte con dignidad)</div>
        <button class="closeBtn" id="btnCloseMemeOverlay" type="button" aria-label="Cerrar">‚úï</button>
      </div>

      <div class="imgWrap">
        <!-- Se rellenar√° desde JS con el dataURL del canvas -->
        <img id="memeOverlayImg" alt="Meme generado" />
      </div>

      <div class="actions" aria-label="Acciones del meme">
        <button class="btnLite" id="btnShareOverlay" type="button" style="display:none;">üì≤ Compartir</button>
        <a class="btnLite" id="btnDownloadOverlay" download="lovasasudar-meme.png" href="#" style="display:none;">‚¨áÔ∏è Descargar</a>
        <button class="btnLite" id="btnRegenOverlay" type="button">üîÅ Regenerar</button>
      </div>
    </div>
  </div>

  <!-- JS modular -->
  <script type="module" src="./assets/js/app.js"></script>
</body>
</html>
